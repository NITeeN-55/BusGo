<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BusGo ‚Äì Travel Smart. Travel Safe.</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #f0ede8;
  --bg2: #e8e4dd;
  --surface: rgba(255,255,255,0.7);
  --surface2: rgba(255,255,255,0.9);
  --border: rgba(0,0,0,0.08);
  --text: #1a1814;
  --text2: #6b6560;
  --text3: #9b948e;
  --accent: #e8521a;
  --accent2: #f07c4a;
  --green: #2d9e6b;
  --red: #d64444;
  --yellow: #f0b429;
  --shadow: 0 4px 24px rgba(0,0,0,0.08);
  --shadow-lg: 0 16px 48px rgba(0,0,0,0.12);
  --radius: 16px;
  --radius-sm: 8px;
  --nav-h: 70px;
}
[data-theme="dark"] {
  --bg: #0f0e0c;
  --bg2: #1a1814;
  --surface: rgba(30,28,24,0.85);
  --surface2: rgba(40,38,32,0.95);
  --border: rgba(255,255,255,0.08);
  --text: #f0ede8;
  --text2: #a09890;
  --text3: #605850;
  --shadow: 0 4px 24px rgba(0,0,0,0.3);
  --shadow-lg: 0 16px 48px rgba(0,0,0,0.5);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  transition: background 0.3s, color 0.3s;
  overflow-x: hidden;
}
h1,h2,h3,h4 { font-family: 'Syne', sans-serif; }

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 3px; }

/* ===== NAV ===== */
#nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
  height: var(--nav-h);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 5%;
  backdrop-filter: blur(20px) saturate(180%);
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  transition: all 0.3s;
}
.nav-logo {
  font-family: 'Syne', sans-serif;
  font-size: 1.6rem;
  font-weight: 800;
  color: var(--accent);
  cursor: pointer;
  letter-spacing: -1px;
}
.nav-logo span { color: var(--text); }
.nav-links { display: flex; gap: 32px; list-style: none; }
.nav-links a {
  font-size: 0.9rem; font-weight: 500;
  color: var(--text2); text-decoration: none;
  transition: color 0.2s;
  position: relative;
}
.nav-links a::after {
  content: ''; position: absolute; bottom: -4px; left: 0; right: 0;
  height: 2px; background: var(--accent);
  transform: scaleX(0); transition: transform 0.2s;
}
.nav-links a:hover { color: var(--accent); }
.nav-links a:hover::after { transform: scaleX(1); }
.nav-right { display: flex; align-items: center; gap: 12px; }
.btn-nav {
  padding: 9px 22px; border-radius: 50px;
  background: var(--accent); color: #fff;
  border: none; font-family: 'DM Sans', sans-serif;
  font-size: 0.85rem; font-weight: 500;
  cursor: pointer; transition: all 0.2s;
}
.btn-nav:hover { background: var(--accent2); transform: translateY(-1px); box-shadow: 0 4px 16px rgba(232,82,26,0.3); }
.btn-dark {
  width: 38px; height: 38px; border-radius: 50%;
  background: var(--bg2); border: 1px solid var(--border);
  cursor: pointer; font-size: 1.1rem;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.btn-dark:hover { transform: rotate(20deg); }
.hamburger { display: none; flex-direction: column; gap: 5px; cursor: pointer; }
.hamburger span { display: block; width: 24px; height: 2px; background: var(--text); border-radius: 2px; transition: all 0.3s; }

/* ===== HERO ===== */
#hero {
  min-height: 100vh;
  padding-top: var(--nav-h);
  display: flex; align-items: center; justify-content: center;
  position: relative; overflow: hidden;
}
.hero-bg {
  position: absolute; inset: 0; z-index: 0;
  background: linear-gradient(135deg, #1a0a04 0%, #3d1505 30%, #6b2a0e 60%, #e8521a 100%);
}
.hero-bg::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 70% 50%, rgba(232,82,26,0.4) 0%, transparent 60%),
              radial-gradient(ellipse at 20% 80%, rgba(240,124,74,0.2) 0%, transparent 50%);
}
.hero-grid {
  position: absolute; inset: 0;
  background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 60px 60px;
}
.hero-bus {
  position: absolute; right: -2%; bottom: 0;
  width: 55%; max-width: 700px; opacity: 0.12;
  font-size: 18vw; line-height: 1;
  display: flex; align-items: flex-end; justify-content: flex-end;
  color: #fff;
  filter: blur(0px);
  animation: busFloat 6s ease-in-out infinite;
}
@keyframes busFloat { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
.hero-content {
  position: relative; z-index: 1;
  width: 100%; max-width: 860px;
  padding: 60px 5% 80px;
  display: flex; flex-direction: column; align-items: center; text-align: center;
}
.hero-badge {
  display: inline-flex; align-items: center; gap: 8px;
  background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.2);
  border-radius: 50px; padding: 6px 16px;
  font-size: 0.8rem; color: rgba(255,255,255,0.8);
  margin-bottom: 28px;
  animation: fadeUp 0.6s 0.2s both;
}
.hero-badge::before { content: '‚ú¶'; color: var(--accent2); }
.hero-h1 {
  font-size: clamp(2.8rem, 7vw, 5.5rem);
  font-weight: 800;
  color: #fff; line-height: 1.05;
  letter-spacing: -2px;
  margin-bottom: 16px;
  animation: fadeUp 0.6s 0.4s both;
}
.hero-h1 em { color: var(--accent2); font-style: normal; }
.hero-sub {
  font-size: 1.1rem; color: rgba(255,255,255,0.65);
  margin-bottom: 48px; max-width: 440px;
  animation: fadeUp 0.6s 0.5s both;
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== SEARCH CARD ===== */
.search-card {
  width: 100%; max-width: 840px;
  background: var(--surface2);
  border-radius: 24px;
  padding: 32px;
  box-shadow: 0 32px 80px rgba(0,0,0,0.4);
  border: 1px solid rgba(255,255,255,0.2);
  backdrop-filter: blur(20px);
  animation: fadeUp 0.6s 0.7s both;
}
.search-row {
  display: grid;
  grid-template-columns: 1fr auto 1fr 1fr 1fr;
  gap: 12px; align-items: end;
}
.swap-btn {
  width: 42px; height: 42px; border-radius: 50%;
  background: var(--accent); border: none;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; font-size: 1.1rem; color: #fff;
  transition: all 0.3s; flex-shrink: 0; margin-bottom: 2px;
}
.swap-btn:hover { transform: rotate(180deg); background: var(--accent2); }
.field-wrap { position: relative; }
.field-wrap label {
  display: block; font-size: 0.75rem; font-weight: 600;
  color: var(--text2); text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 6px;
}
.field-wrap input, .field-wrap select {
  width: 100%; padding: 12px 16px;
  background: var(--bg);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.95rem;
  transition: all 0.2s; outline: none; appearance: none;
}
.field-wrap input:focus, .field-wrap select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(232,82,26,0.12);
}
.field-wrap input::placeholder { color: var(--text3); }
.dropdown-list {
  position: absolute; top: 100%; left: 0; right: 0; z-index: 100;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-lg);
  overflow: hidden; margin-top: 4px;
  display: none;
}
.dropdown-list.open { display: block; animation: fadeDown 0.15s both; }
@keyframes fadeDown { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }
.dropdown-item {
  padding: 11px 16px; cursor: pointer; font-size: 0.9rem;
  color: var(--text); display: flex; align-items: center; gap: 10px;
  transition: background 0.15s;
}
.dropdown-item:hover { background: var(--bg2); }
.dropdown-item .icon { color: var(--accent); font-size: 0.8rem; }
.btn-search {
  padding: 13px 32px; border-radius: var(--radius-sm);
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff; border: none;
  font-family: 'Syne', sans-serif; font-size: 1rem; font-weight: 700;
  cursor: pointer; transition: all 0.2s;
  position: relative; overflow: hidden; white-space: nowrap;
}
.btn-search::after {
  content: ''; position: absolute; top: 50%; left: 50%;
  width: 0; height: 0; border-radius: 50%;
  background: rgba(255,255,255,0.3);
  transform: translate(-50%, -50%);
  transition: width 0.5s, height 0.5s;
}
.btn-search:active::after { width: 200px; height: 200px; }
.btn-search:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(232,82,26,0.4); }

/* ===== SECTION HEADER ===== */
.section-header {
  text-align: center; margin-bottom: 48px;
}
.section-header h2 {
  font-size: 2.2rem; font-weight: 800; letter-spacing: -1px;
}
.section-header p { color: var(--text2); margin-top: 8px; }

/* ===== POPULAR ROUTES ===== */
#popular {
  padding: 80px 5%;
  background: var(--bg2);
}
.routes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 16px;
}
.route-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  cursor: pointer;
  transition: all 0.25s;
  backdrop-filter: blur(10px);
}
.route-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color: var(--accent); }
.route-cities { font-size: 1.1rem; font-weight: 700; color: var(--text); margin-bottom: 6px; }
.route-info { font-size: 0.8rem; color: var(--text2); }
.route-price { font-size: 1.2rem; font-weight: 700; color: var(--accent); margin-top: 12px; }

/* ===== RESULTS PAGE ===== */
#results-page {
  display: none;
  padding-top: var(--nav-h);
  min-height: 100vh;
}
.results-header {
  background: linear-gradient(135deg, #1a0a04, #3d1505);
  padding: 32px 5%;
  color: #fff;
}
.results-header h2 { font-size: 1.6rem; font-weight: 700; }
.results-meta { font-size: 0.85rem; color: rgba(255,255,255,0.65); margin-top: 4px; }
.results-body {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 24px;
  padding: 24px 5%;
  max-width: 1200px;
  margin: 0 auto;
}

/* SIDEBAR */
.sidebar {
  position: sticky; top: calc(var(--nav-h) + 16px);
  height: fit-content;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  backdrop-filter: blur(10px);
}
.sidebar h3 { font-size: 1rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
.filter-group { margin-bottom: 24px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
.filter-group:last-child { border-bottom: none; padding-bottom: 0; margin-bottom: 0; }
.filter-group h4 { font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text2); margin-bottom: 12px; }
.filter-options { display: flex; flex-direction: column; gap: 8px; }
.filter-checkbox {
  display: flex; align-items: center; gap: 10px;
  cursor: pointer; font-size: 0.88rem; color: var(--text2);
  transition: color 0.2s;
}
.filter-checkbox:hover { color: var(--text); }
.filter-checkbox input { display: none; }
.checkmark {
  width: 18px; height: 18px; border-radius: 4px;
  border: 1.5px solid var(--border);
  background: var(--bg);
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s; flex-shrink: 0;
}
.filter-checkbox input:checked ~ .checkmark {
  background: var(--accent); border-color: var(--accent);
  color: #fff; font-size: 0.6rem;
}
.filter-checkbox input:checked ~ .checkmark::after { content: '‚úì'; }
.price-range { width: 100%; }
.range-track {
  width: 100%; appearance: none;
  height: 4px; border-radius: 2px;
  background: linear-gradient(to right, var(--accent) 0%, var(--accent) 60%, var(--border) 60%);
  cursor: pointer; outline: none;
}
.range-track::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px;
  border-radius: 50%; background: var(--accent);
  cursor: pointer; box-shadow: 0 2px 8px rgba(232,82,26,0.3);
  transition: transform 0.2s;
}
.range-track::-webkit-slider-thumb:hover { transform: scale(1.2); }
.range-labels { display: flex; justify-content: space-between; font-size: 0.78rem; color: var(--text2); margin-top: 8px; }
.sort-select {
  width: 100%; padding: 10px 12px;
  background: var(--bg); border: 1.5px solid var(--border);
  border-radius: var(--radius-sm); color: var(--text);
  font-family: 'DM Sans', sans-serif; font-size: 0.88rem;
  cursor: pointer; outline: none; transition: all 0.2s;
}
.sort-select:focus { border-color: var(--accent); }
.time-filter { display: flex; flex-wrap: wrap; gap: 8px; }
.time-chip {
  padding: 6px 12px; border-radius: 50px;
  border: 1.5px solid var(--border);
  background: var(--bg); font-size: 0.78rem; cursor: pointer;
  transition: all 0.2s; color: var(--text2); white-space: nowrap;
}
.time-chip.active { background: var(--accent); border-color: var(--accent); color: #fff; }

/* BUS CARDS */
.bus-list { display: flex; flex-direction: column; gap: 16px; }
.bus-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  transition: all 0.25s;
  backdrop-filter: blur(10px);
  animation: fadeUp 0.4s both;
}
.bus-card:hover { box-shadow: var(--shadow-lg); border-color: rgba(232,82,26,0.3); }
.bus-card-header {
  padding: 20px 24px;
  display: grid;
  grid-template-columns: 1fr auto auto auto auto;
  align-items: center; gap: 16px;
}
.bus-name { font-size: 1.05rem; font-weight: 700; }
.bus-type-badge {
  padding: 4px 12px; border-radius: 50px;
  font-size: 0.72rem; font-weight: 600;
  background: rgba(232,82,26,0.1); color: var(--accent);
  border: 1px solid rgba(232,82,26,0.2);
}
.bus-rating {
  display: flex; align-items: center; gap: 4px;
  background: var(--green); color: #fff;
  padding: 4px 10px; border-radius: 50px;
  font-size: 0.78rem; font-weight: 600;
}
.time-block { text-align: center; }
.time-block .time { font-size: 1.2rem; font-weight: 700; }
.time-block .label { font-size: 0.72rem; color: var(--text2); }
.duration-block { text-align: center; }
.duration-block .dur { font-size: 0.85rem; font-weight: 600; color: var(--text2); }
.duration-line {
  display: flex; align-items: center; gap: 6px;
  justify-content: center;
}
.dur-dash { flex: 1; height: 1px; background: var(--border); }
.dur-icon { font-size: 0.7rem; color: var(--accent); }
.price-block { text-align: right; }
.price-block .from { font-size: 0.72rem; color: var(--text2); }
.price-block .amount { font-size: 1.5rem; font-weight: 800; color: var(--accent); }
.btn-view-seats {
  padding: 10px 20px; border-radius: var(--radius-sm);
  background: var(--accent); color: #fff; border: none;
  font-family: 'DM Sans', sans-serif; font-size: 0.85rem; font-weight: 600;
  cursor: pointer; transition: all 0.2s; white-space: nowrap;
}
.btn-view-seats:hover { background: var(--accent2); transform: translateY(-1px); }
.bus-card-footer {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 24px;
  border-top: 1px solid var(--border);
  background: var(--bg2);
  font-size: 0.8rem; color: var(--text2);
}
.seat-count { display: flex; align-items: center; gap: 6px; }
.seat-count .num { font-weight: 700; color: var(--green); }
.amenities { display: flex; gap: 12px; }
.amenity { display: flex; align-items: center; gap: 4px; }

/* SEAT SELECTION */
#seat-page {
  display: none;
  padding-top: var(--nav-h);
  min-height: 100vh;
}
.seat-page-body {
  max-width: 900px; margin: 0 auto;
  padding: 32px 5%;
}
.step-bar {
  display: flex; align-items: center;
  margin-bottom: 40px; overflow-x: auto;
}
.step {
  display: flex; flex-direction: column; align-items: center;
  gap: 6px; flex: 1; min-width: 70px;
}
.step-num {
  width: 36px; height: 36px; border-radius: 50%;
  border: 2px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 0.85rem; font-weight: 700;
  background: var(--surface); color: var(--text2);
  transition: all 0.3s;
}
.step.active .step-num { background: var(--accent); border-color: var(--accent); color: #fff; }
.step.done .step-num { background: var(--green); border-color: var(--green); color: #fff; }
.step-label { font-size: 0.72rem; color: var(--text2); text-align: center; }
.step-line { flex: 1; height: 2px; background: var(--border); margin-bottom: 20px; }
.step-line.done { background: var(--green); }

.seat-layout-wrap {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 24px;
}
.seat-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  backdrop-filter: blur(10px);
}
.seat-panel h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 20px; }
.seat-bus-top {
  background: var(--bg2); border-radius: 12px;
  padding: 20px 16px;
  position: relative;
}
.driver-area {
  display: flex; justify-content: flex-end;
  padding-bottom: 16px; margin-bottom: 16px;
  border-bottom: 2px dashed var(--border);
}
.driver-seat {
  width: 44px; height: 44px;
  background: var(--text3); border-radius: 8px 8px 4px 4px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.2rem; opacity: 0.5;
}
.seat-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}
.seat-aisle { visibility: hidden; }
.seat {
  width: 40px; height: 40px;
  border-radius: 8px 8px 4px 4px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.7rem; font-weight: 600;
  cursor: pointer; transition: all 0.2s;
  border: 1.5px solid;
  position: relative;
}
.seat.available {
  background: rgba(45,158,107,0.1);
  border-color: rgba(45,158,107,0.3);
  color: var(--green);
}
.seat.available:hover {
  background: var(--green); color: #fff; transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(45,158,107,0.3);
}
.seat.booked {
  background: rgba(0,0,0,0.05);
  border-color: var(--border);
  color: var(--text3); cursor: not-allowed;
}
[data-theme="dark"] .seat.booked { background: rgba(255,255,255,0.05); }
.seat.selected {
  background: var(--accent); border-color: var(--accent);
  color: #fff; transform: scale(1.08);
  box-shadow: 0 4px 12px rgba(232,82,26,0.4);
  animation: seatPop 0.2s both;
}
@keyframes seatPop { 0% { transform: scale(0.9); } 60% { transform: scale(1.15); } 100% { transform: scale(1.08); } }
.seat-legend { display: flex; gap: 16px; margin-top: 20px; flex-wrap: wrap; }
.legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.78rem; color: var(--text2); }
.legend-dot { width: 14px; height: 14px; border-radius: 3px; border: 1.5px solid; }
.legend-dot.available { background: rgba(45,158,107,0.1); border-color: rgba(45,158,107,0.4); }
.legend-dot.booked { background: rgba(0,0,0,0.05); border-color: var(--border); }
.legend-dot.selected { background: var(--accent); border-color: var(--accent); }

/* BOOKING SUMMARY */
.booking-summary {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  position: sticky; top: calc(var(--nav-h) + 16px);
  backdrop-filter: blur(10px);
}
.booking-summary h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 20px; }
.summary-bus-info { margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.summary-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.88rem; }
.summary-row .key { color: var(--text2); }
.summary-row .val { font-weight: 600; }
.selected-seats-chips { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
.seat-chip {
  padding: 4px 10px; border-radius: 50px;
  background: rgba(232,82,26,0.1); color: var(--accent);
  border: 1px solid rgba(232,82,26,0.2);
  font-size: 0.78rem; font-weight: 600;
}
.total-row {
  display: flex; justify-content: space-between;
  font-size: 1.1rem; font-weight: 700;
  padding-top: 16px; border-top: 1px solid var(--border); margin-top: 8px;
}
.total-row .total-amt { color: var(--accent); font-size: 1.4rem; }
.coupon-row { margin: 16px 0; }
.coupon-input-wrap { display: flex; gap: 8px; }
.coupon-input-wrap input {
  flex: 1; padding: 10px 12px;
  background: var(--bg); border: 1.5px solid var(--border);
  border-radius: var(--radius-sm); color: var(--text);
  font-family: 'DM Sans', sans-serif; font-size: 0.85rem; outline: none;
  transition: all 0.2s; text-transform: uppercase;
}
.coupon-input-wrap input:focus { border-color: var(--accent); }
.btn-apply {
  padding: 10px 16px; border-radius: var(--radius-sm);
  background: var(--bg2); border: 1.5px solid var(--border);
  color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.82rem;
  cursor: pointer; transition: all 0.2s; font-weight: 600;
}
.btn-apply:hover { border-color: var(--accent); color: var(--accent); }
.coupon-success { color: var(--green); font-size: 0.8rem; margin-top: 6px; display: none; }
.btn-proceed {
  width: 100%; padding: 14px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff; border: none; border-radius: var(--radius-sm);
  font-family: 'Syne', sans-serif; font-size: 1rem; font-weight: 700;
  cursor: pointer; transition: all 0.2s; margin-top: 16px;
}
.btn-proceed:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(232,82,26,0.3); }
.btn-proceed:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* PASSENGER DETAILS */
#details-page {
  display: none; padding-top: var(--nav-h); min-height: 100vh;
}
.details-body { max-width: 700px; margin: 0 auto; padding: 32px 5%; }
.form-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 32px;
  margin-bottom: 20px; backdrop-filter: blur(10px);
}
.form-card h3 { font-size: 1.15rem; font-weight: 700; margin-bottom: 24px; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.form-field { position: relative; }
.form-field label {
  position: absolute; top: 14px; left: 14px;
  font-size: 0.88rem; color: var(--text2);
  transition: all 0.2s; pointer-events: none; background: transparent;
}
.form-field input, .form-field select {
  width: 100%; padding: 22px 14px 8px;
  background: var(--bg); border: 1.5px solid var(--border);
  border-radius: var(--radius-sm); color: var(--text);
  font-family: 'DM Sans', sans-serif; font-size: 0.95rem; outline: none;
  transition: all 0.2s;
}
.form-field input:focus, .form-field select:focus { border-color: var(--accent); }
.form-field input:focus + label,
.form-field input:not(:placeholder-shown) + label,
.form-field select:focus + label,
.form-field.has-val label {
  top: 6px; font-size: 0.72px; color: var(--accent);
  font-size: 0.7rem; font-weight: 600;
}
.form-field .err {
  font-size: 0.72rem; color: var(--red);
  margin-top: 4px; display: none;
  animation: errShake 0.3s both;
}
@keyframes errShake { 0%,100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }
.form-field.error input { border-color: var(--red); }
.form-field.error .err { display: block; }
.payment-methods { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
.pay-method {
  padding: 16px; border-radius: var(--radius-sm);
  border: 2px solid var(--border);
  text-align: center; cursor: pointer; transition: all 0.2s;
  background: var(--bg);
}
.pay-method:hover { border-color: var(--accent); }
.pay-method.active { border-color: var(--accent); background: rgba(232,82,26,0.06); }
.pay-method .icon { font-size: 1.8rem; display: block; margin-bottom: 6px; }
.pay-method .name { font-size: 0.8rem; font-weight: 600; color: var(--text2); }
.btn-pay {
  width: 100%; padding: 16px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff; border: none; border-radius: var(--radius-sm);
  font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 700;
  cursor: pointer; transition: all 0.2s; margin-top: 8px;
  position: relative; overflow: hidden;
}
.btn-pay:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(232,82,26,0.4); }

/* LOADING */
.payment-loading {
  display: none; position: fixed; inset: 0; z-index: 2000;
  background: rgba(0,0,0,0.6); backdrop-filter: blur(8px);
  align-items: center; justify-content: center; flex-direction: column;
}
.payment-loading.show { display: flex; }
.loader-ring {
  width: 64px; height: 64px; border: 4px solid rgba(255,255,255,0.2);
  border-top-color: var(--accent); border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loader-text { color: #fff; margin-top: 16px; font-family: 'Syne', sans-serif; font-size: 1.1rem; }

/* CONFIRMATION */
#confirm-page {
  display: none; padding-top: var(--nav-h); min-height: 100vh;
}
.confirm-body { max-width: 700px; margin: 0 auto; padding: 32px 5%; }
.confetti-wrap { position: fixed; inset: 0; pointer-events: none; z-index: 1500; overflow: hidden; }
.confetti-piece {
  position: absolute; width: 10px; height: 10px;
  border-radius: 2px; animation: confettiFall 3s forwards;
}
@keyframes confettiFall {
  0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
}
.confirm-hero {
  text-align: center; margin-bottom: 32px; padding: 40px 20px;
  background: linear-gradient(135deg, rgba(45,158,107,0.1), rgba(232,82,26,0.05));
  border-radius: var(--radius);
  border: 1px solid rgba(45,158,107,0.2);
}
.confirm-icon { font-size: 4rem; margin-bottom: 12px; animation: bounceIn 0.5s both; }
@keyframes bounceIn { 0% { transform: scale(0); } 60% { transform: scale(1.2); } 100% { transform: scale(1); } }
.confirm-hero h2 { font-size: 2rem; font-weight: 800; color: var(--green); }
.confirm-hero p { color: var(--text2); margin-top: 8px; }
.ticket-card {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
}
.ticket-header {
  background: linear-gradient(135deg, #1a0a04, #3d1505);
  padding: 24px 28px;
  display: flex; justify-content: space-between; align-items: center;
}
.ticket-header .logo { color: var(--accent2); font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.3rem; }
.ticket-id { font-size: 0.78rem; color: rgba(255,255,255,0.6); }
.ticket-id span { color: #fff; font-weight: 700; font-size: 0.9rem; }
.ticket-body { padding: 28px; }
.ticket-route {
  display: flex; align-items: center; gap: 16px;
  margin-bottom: 28px;
}
.ticket-city { text-align: center; }
.ticket-city .city-name { font-size: 1.5rem; font-weight: 800; }
.ticket-city .city-time { font-size: 0.85rem; color: var(--text2); margin-top: 4px; }
.ticket-arrow { flex: 1; text-align: center; color: var(--text3); font-size: 1.5rem; }
.ticket-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 28px; }
.ticket-field .key { font-size: 0.72rem; color: var(--text2); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
.ticket-field .val { font-size: 0.95rem; font-weight: 600; }
.ticket-qr {
  display: flex; justify-content: center; padding: 20px;
  border-top: 1px dashed var(--border);
}
.qr-placeholder {
  width: 120px; height: 120px;
  background: var(--bg); border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.7rem; color: var(--text3); text-align: center;
}
.ticket-actions { display: flex; gap: 12px; margin-top: 20px; }
.btn-download, .btn-print {
  flex: 1; padding: 12px; border-radius: var(--radius-sm);
  font-family: 'DM Sans', sans-serif; font-size: 0.9rem; font-weight: 600;
  cursor: pointer; transition: all 0.2s; display: flex; align-items: center;
  justify-content: center; gap: 8px;
}
.btn-download { background: var(--accent); color: #fff; border: none; }
.btn-download:hover { background: var(--accent2); transform: translateY(-1px); }
.btn-print { background: var(--bg); border: 1.5px solid var(--border); color: var(--text); }
.btn-print:hover { border-color: var(--accent); color: var(--accent); }
.btn-back {
  display: flex; align-items: center; gap: 8px;
  padding: 10px 20px; border-radius: 50px;
  background: var(--bg2); border: 1px solid var(--border);
  color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.88rem;
  cursor: pointer; transition: all 0.2s; margin-bottom: 20px;
}
.btn-back:hover { background: var(--accent); color: #fff; border-color: var(--accent); }

/* SKELETON */
.skeleton {
  background: linear-gradient(90deg, var(--bg2) 25%, var(--border) 50%, var(--bg2) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 6px;
}
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

/* TOAST */
.toast {
  position: fixed; bottom: 24px; right: 24px; z-index: 3000;
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 14px 20px;
  box-shadow: var(--shadow-lg); font-size: 0.88rem; font-weight: 500;
  transform: translateX(120%); transition: transform 0.3s cubic-bezier(0.34,1.56,0.64,1);
  display: flex; align-items: center; gap: 10px; max-width: 300px;
}
.toast.show { transform: translateX(0); }
.toast-icon { font-size: 1.1rem; }

/* MOBILE NAV */
.mobile-menu {
  display: none; position: fixed; top: var(--nav-h); left: 0; right: 0; z-index: 999;
  background: var(--surface2); backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 20px 5%; flex-direction: column; gap: 16px;
}
.mobile-menu.open { display: flex; }
.mobile-menu a { color: var(--text2); text-decoration: none; font-size: 1rem; padding: 8px 0; border-bottom: 1px solid var(--border); }

/* RESPONSIVE */
@media (max-width: 900px) {
  .search-row { grid-template-columns: 1fr 1fr; }
  .search-row .swap-btn { display: none; }
  .results-body { grid-template-columns: 1fr; }
  .sidebar { position: relative; top: 0; }
  .seat-layout-wrap { grid-template-columns: 1fr; }
  .booking-summary { position: relative; top: 0; }
  .bus-card-header { grid-template-columns: 1fr; gap: 10px; }
  .nav-links, .btn-nav { display: none; }
  .hamburger { display: flex; }
  .form-grid { grid-template-columns: 1fr; }
  .ticket-grid { grid-template-columns: 1fr 1fr; }
  .payment-methods { grid-template-columns: 1fr 1fr 1fr; }
}
@media (max-width: 600px) {
  .hero-h1 { font-size: 2.4rem; }
  .search-row { grid-template-columns: 1fr; }
  .btn-search { width: 100%; }
  .ticket-grid { grid-template-columns: 1fr 1fr; }
  .seat-grid { grid-template-columns: repeat(5, 1fr); gap: 5px; }
  .seat { width: 34px; height: 34px; font-size: 0.62rem; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav id="nav">
  <div class="nav-logo" onclick="goHome()">Bus<span>Go</span></div>
  <ul class="nav-links">
    <li><a href="#" onclick="goHome()">Home</a></li>
    <li><a href="#">My Bookings</a></li>
    <li><a href="#">Offers</a></li>
    <li><a href="#">Support</a></li>
  </ul>
  <div class="nav-right">
    <button class="btn-dark" onclick="toggleDark()" id="darkBtn">üåô</button>
    <button class="btn-nav">Login</button>
    <div class="hamburger" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </div>
  </div>
</nav>
<div class="mobile-menu" id="mobileMenu">
  <a href="#" onclick="goHome()">Home</a>
  <a href="#">My Bookings</a>
  <a href="#">Offers</a>
  <a href="#">Support</a>
  <button class="btn-nav" style="width:fit-content">Login / Signup</button>
</div>

<!-- LOADING OVERLAY -->
<div class="payment-loading" id="payLoader">
  <div class="loader-ring"></div>
  <div class="loader-text">Processing payment‚Ä¶</div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <span class="toast-icon">‚úì</span>
  <span id="toastMsg">Done!</span>
</div>

<!-- ===== HOME PAGE ===== -->
<div id="home-page">

  <!-- HERO -->
  <section id="hero">
    <div class="hero-bg">
      <div class="hero-grid"></div>
    </div>
    <div class="hero-bus">üöå</div>
    <div class="hero-content">
      <div class="hero-badge">India's #1 Bus Booking Platform</div>
      <h1 class="hero-h1">Travel <em>Smart.</em><br>Travel Safe.</h1>
      <p class="hero-sub">Book from 2000+ routes across India. Lowest fares, live seat tracking.</p>

      <!-- SEARCH CARD -->
      <div class="search-card">
        <div class="search-row">
          <div class="field-wrap">
            <label>From</label>
            <input type="text" id="fromCity" placeholder="e.g. Mumbai" autocomplete="off" oninput="showSuggestions('from',this.value)" onfocus="showSuggestions('from',this.value)">
            <div class="dropdown-list" id="fromDropdown"></div>
          </div>
          <button class="swap-btn" onclick="swapCities()">‚áÑ</button>
          <div class="field-wrap">
            <label>To</label>
            <input type="text" id="toCity" placeholder="e.g. Pune" autocomplete="off" oninput="showSuggestions('to',this.value)" onfocus="showSuggestions('to',this.value)">
            <div class="dropdown-list" id="toDropdown"></div>
          </div>
          <div class="field-wrap">
            <label>Date</label>
            <input type="date" id="travelDate">
          </div>
          <div class="field-wrap">
            <label>Bus Type</label>
            <select id="busTypeFilter">
              <option value="">All Types</option>
              <option>AC</option>
              <option>Non-AC</option>
              <option>Sleeper</option>
              <option>Volvo</option>
            </select>
          </div>
        </div>
        <div style="margin-top:16px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
          <button class="btn-search" onclick="searchBuses()">üîç Search Buses</button>
          <div style="font-size:0.8rem;color:var(--text2)">Popular: <span style="color:var(--accent);cursor:pointer" onclick="quickSearch('Mumbai','Pune')">Mumbai‚ÜíPune</span> ¬∑ <span style="color:var(--accent);cursor:pointer" onclick="quickSearch('Delhi','Jaipur')">Delhi‚ÜíJaipur</span> ¬∑ <span style="color:var(--accent);cursor:pointer" onclick="quickSearch('Bangalore','Chennai')">Bangalore‚ÜíChennai</span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- POPULAR ROUTES -->
  <section id="popular">
    <div class="section-header">
      <h2>Popular Routes</h2>
      <p>Most booked routes across India</p>
    </div>
    <div class="routes-grid" id="popularRoutes"></div>
  </section>

</div>

<!-- ===== RESULTS PAGE ===== -->
<div id="results-page">
  <div class="results-header">
    <button class="btn-back" onclick="goHome()">‚Üê Back</button>
    <h2 id="resultsTitle">Buses Found</h2>
    <div class="results-meta" id="resultsMeta"></div>
  </div>
  <div class="results-body">
    <aside class="sidebar">
      <h3>üéõ Filters</h3>
      <div class="filter-group">
        <h4>Sort By</h4>
        <select class="sort-select" id="sortBy" onchange="applyFilters()">
          <option value="price">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="departure">Departure Time</option>
          <option value="duration">Duration</option>
          <option value="rating">Rating</option>
        </select>
      </div>
      <div class="filter-group">
        <h4>Price Range</h4>
        <input type="range" class="range-track" id="priceRange" min="100" max="3000" value="3000" oninput="updatePrice(this.value)">
        <div class="range-labels"><span>‚Çπ100</span><span id="priceLabel">‚Çπ3000</span></div>
      </div>
      <div class="filter-group">
        <h4>Departure Time</h4>
        <div class="time-filter">
          <div class="time-chip active" data-time="all" onclick="filterTime(this,'all')">All</div>
          <div class="time-chip" data-time="morning" onclick="filterTime(this,'morning')">üåÖ Morning</div>
          <div class="time-chip" data-time="afternoon" onclick="filterTime(this,'afternoon')">‚òÄÔ∏è Afternoon</div>
          <div class="time-chip" data-time="evening" onclick="filterTime(this,'evening')">üåÜ Evening</div>
          <div class="time-chip" data-time="night" onclick="filterTime(this,'night')">üåô Night</div>
        </div>
      </div>
      <div class="filter-group">
        <h4>Bus Type</h4>
        <div class="filter-options">
          <label class="filter-checkbox"><input type="checkbox" value="AC" onchange="applyFilters()"><span class="checkmark"></span>AC</label>
          <label class="filter-checkbox"><input type="checkbox" value="Non-AC" onchange="applyFilters()"><span class="checkmark"></span>Non-AC</label>
          <label class="filter-checkbox"><input type="checkbox" value="Sleeper" onchange="applyFilters()"><span class="checkmark"></span>Sleeper</label>
          <label class="filter-checkbox"><input type="checkbox" value="Volvo" onchange="applyFilters()"><span class="checkmark"></span>Volvo</label>
        </div>
      </div>
      <div class="filter-group">
        <h4>Minimum Rating</h4>
        <div class="filter-options">
          <label class="filter-checkbox"><input type="radio" name="rating" value="0" checked onchange="applyFilters()"><span class="checkmark"></span>All</label>
          <label class="filter-checkbox"><input type="radio" name="rating" value="4" onchange="applyFilters()"><span class="checkmark"></span>‚≠ê 4+ Stars</label>
          <label class="filter-checkbox"><input type="radio" name="rating" value="4.5" onchange="applyFilters()"><span class="checkmark"></span>‚≠ê 4.5+ Stars</label>
        </div>
      </div>
    </aside>
    <div>
      <div class="bus-list" id="busList"></div>
    </div>
  </div>
</div>

<!-- ===== SEAT PAGE ===== -->
<div id="seat-page">
  <div class="seat-page-body">
    <button class="btn-back" onclick="goResults()">‚Üê Back to Buses</button>
    <div class="step-bar" id="stepBar"></div>
    <div class="seat-layout-wrap">
      <div class="seat-panel">
        <h3 id="seatPanelTitle">Select Your Seats</h3>
        <div class="seat-bus-top">
          <div class="driver-area">
            <div class="driver-seat">üöó</div>
          </div>
          <div class="seat-grid" id="seatGrid"></div>
        </div>
        <div class="seat-legend">
          <div class="legend-item"><div class="legend-dot available"></div>Available</div>
          <div class="legend-item"><div class="legend-dot booked"></div>Booked</div>
          <div class="legend-item"><div class="legend-dot selected"></div>Selected</div>
        </div>
        <p style="font-size:0.78rem;color:var(--text2);margin-top:12px">Max 6 seats per booking. Click to select.</p>
      </div>
      <div>
        <div class="booking-summary">
          <h3>Booking Summary</h3>
          <div class="summary-bus-info">
            <div class="summary-row"><span class="key">Bus</span><span class="val" id="sumBusName">-</span></div>
            <div class="summary-row"><span class="key">Route</span><span class="val" id="sumRoute">-</span></div>
            <div class="summary-row"><span class="key">Date</span><span class="val" id="sumDate">-</span></div>
            <div class="summary-row"><span class="key">Departure</span><span class="val" id="sumDep">-</span></div>
          </div>
          <div class="summary-row"><span class="key">Selected Seats</span></div>
          <div class="selected-seats-chips" id="selectedChips"><span style="color:var(--text3);font-size:0.82rem">No seats selected</span></div>
          <div class="coupon-row">
            <div class="coupon-input-wrap">
              <input type="text" id="couponInput" placeholder="COUPON CODE">
              <button class="btn-apply" onclick="applyCoupon()">Apply</button>
            </div>
            <div class="coupon-success" id="couponSuccess">üéâ Coupon applied! ‚Çπ<span id="discountAmt">0</span> off</div>
          </div>
          <div class="summary-row"><span class="key">Price per seat</span><span class="val" id="sumPrice">-</span></div>
          <div class="summary-row"><span class="key">Seats</span><span class="val" id="sumSeats">0</span></div>
          <div class="summary-row" id="discountRow" style="display:none"><span class="key" style="color:var(--green)">Discount</span><span class="val" style="color:var(--green)" id="discountDisplay">-‚Çπ0</span></div>
          <div class="total-row"><span>Total</span><span class="total-amt" id="totalAmt">‚Çπ0</span></div>
          <button class="btn-proceed" id="proceedBtn" disabled onclick="goDetails()">Proceed to Details</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== DETAILS PAGE ===== -->
<div id="details-page">
  <div class="details-body">
    <button class="btn-back" onclick="goSeat()">‚Üê Back to Seats</button>
    <div class="step-bar" id="stepBar2"></div>
    <div class="form-card">
      <h3>üë§ Passenger Details</h3>
      <div class="form-grid">
        <div class="form-field" id="ff-name">
          <input type="text" id="pName" placeholder=" ">
          <label>Full Name *</label>
          <div class="err">Please enter your full name</div>
        </div>
        <div class="form-field" id="ff-phone">
          <input type="tel" id="pPhone" placeholder=" ">
          <label>Phone Number *</label>
          <div class="err">Enter valid 10-digit number</div>
        </div>
        <div class="form-field" id="ff-email">
          <input type="email" id="pEmail" placeholder=" ">
          <label>Email Address *</label>
          <div class="err">Enter valid email address</div>
        </div>
        <div class="form-field" id="ff-age">
          <input type="number" id="pAge" placeholder=" " min="5" max="100">
          <label>Age *</label>
          <div class="err">Age must be between 5 and 100</div>
        </div>
      </div>
    </div>
    <div class="form-card">
      <h3>üí≥ Payment Method</h3>
      <div class="payment-methods">
        <div class="pay-method active" onclick="selectPay(this,'card')">
          <span class="icon">üí≥</span>
          <span class="name">Card</span>
        </div>
        <div class="pay-method" onclick="selectPay(this,'upi')">
          <span class="icon">üì±</span>
          <span class="name">UPI</span>
        </div>
        <div class="pay-method" onclick="selectPay(this,'wallet')">
          <span class="icon">üëõ</span>
          <span class="name">Wallet</span>
        </div>
      </div>
      <div id="cardFields" style="margin-top:20px">
        <div class="form-grid">
          <div class="form-field" id="ff-card" style="grid-column:1/-1">
            <input type="text" id="pCard" placeholder=" " maxlength="19">
            <label>Card Number</label>
          </div>
          <div class="form-field">
            <input type="text" id="pExpiry" placeholder=" " maxlength="5">
            <label>Expiry (MM/YY)</label>
          </div>
          <div class="form-field">
            <input type="password" id="pCVV" placeholder=" " maxlength="3">
            <label>CVV</label>
          </div>
        </div>
      </div>
      <div id="upiField" style="margin-top:20px;display:none">
        <div class="form-field">
          <input type="text" id="pUPI" placeholder=" ">
          <label>UPI ID (e.g. name@upi)</label>
        </div>
      </div>
      <div style="margin-top:20px">
        <div class="summary-row"><span class="key">Total Amount</span><span class="val" id="detailTotal" style="color:var(--accent);font-size:1.2rem">-</span></div>
        <button class="btn-pay" onclick="processPayment()">Pay Now üîí</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== CONFIRM PAGE ===== -->
<div id="confirm-page">
  <div class="confetti-wrap" id="confettiWrap"></div>
  <div class="confirm-body">
    <div class="confirm-hero">
      <div class="confirm-icon">üéâ</div>
      <h2>Booking Confirmed!</h2>
      <p>Your ticket has been booked successfully. Safe travels!</p>
    </div>
    <div class="ticket-card">
      <div class="ticket-header">
        <div class="logo">BusGo</div>
        <div class="ticket-id">Booking ID: <span id="ticketId">-</span></div>
      </div>
      <div class="ticket-body">
        <div class="ticket-route">
          <div class="ticket-city">
            <div class="city-name" id="tcFrom">-</div>
            <div class="city-time" id="tcDep">-</div>
          </div>
          <div class="ticket-arrow">‚Üí</div>
          <div class="ticket-city">
            <div class="city-name" id="tcTo">-</div>
            <div class="city-time" id="tcArr">-</div>
          </div>
        </div>
        <div class="ticket-grid">
          <div class="ticket-field"><div class="key">Passenger</div><div class="val" id="tcName">-</div></div>
          <div class="ticket-field"><div class="key">Bus</div><div class="val" id="tcBus">-</div></div>
          <div class="ticket-field"><div class="key">Seats</div><div class="val" id="tcSeats">-</div></div>
          <div class="ticket-field"><div class="key">Date</div><div class="val" id="tcDate">-</div></div>
          <div class="ticket-field"><div class="key">Phone</div><div class="val" id="tcPhone">-</div></div>
          <div class="ticket-field"><div class="key">Amount Paid</div><div class="val" id="tcAmount" style="color:var(--accent)">-</div></div>
        </div>
        <div class="ticket-qr">
          <div class="qr-placeholder" id="qrCode">QR Code<br>Loading‚Ä¶</div>
        </div>
      </div>
    </div>
    <div class="ticket-actions">
      <button class="btn-download" onclick="showToast('üì• Ticket downloaded!')">üì• Download PDF</button>
      <button class="btn-print" onclick="window.print()">üñ® Print Ticket</button>
    </div>
    <div style="text-align:center;margin-top:24px">
      <button class="btn-search" onclick="goHome()">Book Another Ticket</button>
    </div>
  </div>
</div>

<script>
// ===== DATA =====
const CITIES = ['Mumbai','Pune','Delhi','Jaipur','Bangalore','Chennai','Hyderabad','Kolkata','Ahmedabad','Surat','Nagpur','Nashik','Lucknow','Kanpur','Indore','Bhopal','Vadodara','Coimbatore','Kochi','Goa','Chandigarh','Amritsar'];

const BUS_DATA = [
  { id:1, name:'Sharma Travels', type:'AC', rating:4.7, dep:'06:00', arr:'12:00', dur:'6h', price:580, seats:32, booked:[2,5,8,11,14,17], amenities:['üí∫ AC','üì∫ TV','üîå USB'] },
  { id:2, name:'Royal Travels', type:'Volvo', rating:4.9, dep:'07:30', arr:'14:30', dur:'7h', price:850, seats:28, booked:[1,4,7,13,19,22], amenities:['üí∫ AC','üç± Meals','üì∂ WiFi'] },
  { id:3, name:'VRL Express', type:'Sleeper', rating:4.3, dep:'22:00', arr:'06:00', dur:'8h', price:680, seats:36, booked:[3,6,9,12,15,20], amenities:['üõè Sleeper','üí∫ AC','üîå USB'] },
  { id:4, name:'SRS Travels', type:'Non-AC', rating:4.1, dep:'09:00', arr:'15:00', dur:'6h', price:320, seats:40, booked:[2,4,8,16,24,30], amenities:['üöå Standard'] },
  { id:5, name:'Orange Tours', type:'AC', rating:4.5, dep:'14:30', arr:'20:30', dur:'6h', price:620, seats:34, booked:[5,10,15,20,25], amenities:['üí∫ AC','üì∂ WiFi','üîå USB'] },
  { id:6, name:'Paulo Travels', type:'Volvo', rating:4.8, dep:'23:00', arr:'07:00', dur:'8h', price:920, seats:26, booked:[1,3,7,11,15,19], amenities:['üí∫ AC','üç± Meals','üì∂ WiFi','üõè Sleeper'] },
  { id:7, name:'Neeta Tours', type:'AC', rating:4.2, dep:'16:00', arr:'23:00', dur:'7h', price:550, seats:38, booked:[6,12,18,24,30], amenities:['üí∫ AC','üîå USB'] },
  { id:8, name:'Patel Travels', type:'Sleeper', rating:4.6, dep:'20:30', arr:'05:00', dur:'8.5h', price:760, seats:30, booked:[2,7,14,21,28], amenities:['üõè Sleeper','üí∫ AC','üç± Snacks'] },
];

const POPULAR_ROUTES = [
  {from:'Mumbai',to:'Pune',duration:'2.5h',from_price:150},
  {from:'Delhi',to:'Jaipur',duration:'4.5h',from_price:300},
  {from:'Bangalore',to:'Chennai',duration:'6h',from_price:450},
  {from:'Hyderabad',to:'Bangalore',duration:'8h',from_price:500},
  {from:'Ahmedabad',to:'Mumbai',duration:'7h',from_price:400},
  {from:'Delhi',to:'Agra',duration:'3h',from_price:200},
  {from:'Pune',to:'Goa',duration:'8h',from_price:600},
  {from:'Chennai',to:'Coimbatore',duration:'5h',from_price:350},
];

// ===== STATE =====
let state = {
  from: '', to: '', date: '', busTypeSearch: '',
  selectedBus: null, selectedSeats: [], discount: 0,
  passenger: {}, payMethod: 'card'
};
let activePriceFilter = 3000;
let activeTimeFilter = 'all';

// ===== INIT =====
window.onload = () => {
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('travelDate').value = today;
  renderPopularRoutes();
  document.addEventListener('click', e => {
    if (!e.target.closest('.field-wrap')) closeDropdowns();
  });
};

// ===== DARK MODE =====
function toggleDark() {
  const t = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', t);
  document.getElementById('darkBtn').textContent = t === 'dark' ? '‚òÄÔ∏è' : 'üåô';
}

// ===== MOBILE MENU =====
function toggleMenu() {
  document.getElementById('mobileMenu').classList.toggle('open');
}

// ===== POPULAR ROUTES =====
function renderPopularRoutes() {
  const c = document.getElementById('popularRoutes');
  c.innerHTML = POPULAR_ROUTES.map(r => `
    <div class="route-card" onclick="quickSearch('${r.from}','${r.to}')">
      <div class="route-cities">${r.from} ‚Üí ${r.to}</div>
      <div class="route-info">‚è± ${r.duration}</div>
      <div class="route-price">From ‚Çπ${r.from_price}</div>
    </div>
  `).join('');
}

// ===== AUTOCOMPLETE =====
function showSuggestions(type, val) {
  const id = type === 'from' ? 'fromDropdown' : 'toDropdown';
  const el = document.getElementById(id);
  const filtered = CITIES.filter(c => c.toLowerCase().includes(val.toLowerCase())).slice(0, 6);
  if (!filtered.length || !val) { el.classList.remove('open'); return; }
  el.innerHTML = filtered.map(c => `<div class="dropdown-item" onclick="selectCity('${type}','${c}')"><span class="icon">üìç</span>${c}</div>`).join('');
  el.classList.add('open');
}
function selectCity(type, city) {
  if (type === 'from') { document.getElementById('fromCity').value = city; state.from = city; }
  else { document.getElementById('toCity').value = city; state.to = city; }
  closeDropdowns();
}
function closeDropdowns() {
  document.querySelectorAll('.dropdown-list').forEach(d => d.classList.remove('open'));
}
function swapCities() {
  const f = document.getElementById('fromCity').value;
  const t = document.getElementById('toCity').value;
  document.getElementById('fromCity').value = t;
  document.getElementById('toCity').value = f;
  state.from = t; state.to = f;
}
function quickSearch(from, to) {
  document.getElementById('fromCity').value = from;
  document.getElementById('toCity').value = to;
  state.from = from; state.to = to;
  searchBuses();
}

// ===== SEARCH =====
function searchBuses() {
  state.from = document.getElementById('fromCity').value.trim();
  state.to = document.getElementById('toCity').value.trim();
  state.date = document.getElementById('travelDate').value;
  state.busTypeSearch = document.getElementById('busTypeFilter').value;
  if (!state.from || !state.to) { showToast('‚ö†Ô∏è Please enter From and To cities'); return; }
  if (state.from === state.to) { showToast('‚ö†Ô∏è From and To cities must be different'); return; }
  showResults();
}

function showResults() {
  showPage('results-page');
  document.getElementById('resultsTitle').textContent = `${state.from} ‚Üí ${state.to}`;
  const d = state.date ? new Date(state.date).toLocaleDateString('en-IN',{weekday:'short',day:'numeric',month:'short',year:'numeric'}) : '';
  document.getElementById('resultsMeta').textContent = `${d} ¬∑ ${BUS_DATA.length} buses found`;
  applyFilters();
}

function applyFilters() {
  let buses = [...BUS_DATA];
  // type filter
  const checkedTypes = [...document.querySelectorAll('.filter-options input[type=checkbox]:checked')].map(x=>x.value);
  if (checkedTypes.length) buses = buses.filter(b => checkedTypes.includes(b.type));
  // price
  buses = buses.filter(b => b.price <= activePriceFilter);
  // time
  if (activeTimeFilter !== 'all') {
    buses = buses.filter(b => {
      const h = parseInt(b.dep.split(':')[0]);
      if (activeTimeFilter === 'morning') return h >= 5 && h < 12;
      if (activeTimeFilter === 'afternoon') return h >= 12 && h < 17;
      if (activeTimeFilter === 'evening') return h >= 17 && h < 21;
      if (activeTimeFilter === 'night') return h >= 21 || h < 5;
    });
  }
  // rating
  const minRating = parseFloat(document.querySelector('input[name="rating"]:checked')?.value || 0);
  if (minRating > 0) buses = buses.filter(b => b.rating >= minRating);
  // sort
  const sort = document.getElementById('sortBy').value;
  if (sort === 'price') buses.sort((a,b) => a.price - b.price);
  else if (sort === 'price-desc') buses.sort((a,b) => b.price - a.price);
  else if (sort === 'departure') buses.sort((a,b) => a.dep.localeCompare(b.dep));
  else if (sort === 'rating') buses.sort((a,b) => b.rating - a.rating);
  renderBuses(buses);
}

function updatePrice(val) {
  activePriceFilter = parseInt(val);
  document.getElementById('priceLabel').textContent = '‚Çπ' + val;
  // update gradient
  const pct = ((val - 100) / 2900) * 100;
  document.getElementById('priceRange').style.background = `linear-gradient(to right, var(--accent) 0%, var(--accent) ${pct}%, var(--border) ${pct}%)`;
  applyFilters();
}
function filterTime(el, val) {
  document.querySelectorAll('.time-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  activeTimeFilter = val;
  applyFilters();
}

// ===== RENDER BUSES =====
function renderBuses(buses) {
  const list = document.getElementById('busList');
  if (!buses.length) {
    list.innerHTML = '<div style="text-align:center;padding:60px;color:var(--text2)"><div style="font-size:3rem">üöå</div><p style="margin-top:12px">No buses found with these filters</p></div>';
    return;
  }
  list.innerHTML = buses.map((b, i) => `
    <div class="bus-card" style="animation-delay:${i * 0.07}s">
      <div class="bus-card-header">
        <div>
          <div class="bus-name">${b.name}</div>
          <div class="bus-type-badge" style="margin-top:4px;display:inline-block">${b.type}</div>
        </div>
        <div class="bus-rating">‚≠ê ${b.rating}</div>
        <div class="time-block">
          <div class="time">${b.dep}</div>
          <div class="label">Departure</div>
        </div>
        <div class="duration-block" style="min-width:80px">
          <div class="duration-line">
            <div class="dur-dash"></div>
            <span class="dur-icon">üöå</span>
            <div class="dur-dash"></div>
          </div>
          <div class="dur">${b.dur}</div>
        </div>
        <div class="time-block">
          <div class="time">${b.arr}</div>
          <div class="label">Arrival</div>
        </div>
        <div class="price-block">
          <div class="from">starts from</div>
          <div class="amount">‚Çπ${b.price}</div>
        </div>
        <button class="btn-view-seats" onclick="selectBus(${b.id})">View Seats</button>
      </div>
      <div class="bus-card-footer">
        <div class="seat-count">ü™ë <span class="num">${b.seats - b.booked.length}</span> seats left</div>
        <div class="amenities">${b.amenities.map(a=>`<span class="amenity">${a}</span>`).join('')}</div>
      </div>
    </div>
  `).join('');
}

// ===== SEAT SELECTION =====
function selectBus(id) {
  state.selectedBus = BUS_DATA.find(b => b.id === id);
  state.selectedSeats = [];
  state.discount = 0;
  document.getElementById('couponInput').value = '';
  document.getElementById('couponSuccess').style.display = 'none';
  document.getElementById('discountRow').style.display = 'none';
  showPage('seat-page');
  renderStepBar('stepBar', 2);
  renderSeatGrid();
  updateSummary();
}

function renderSeatGrid() {
  const bus = state.selectedBus;
  document.getElementById('seatPanelTitle').textContent = `${bus.name} ‚Äì ${bus.type}`;
  document.getElementById('sumBusName').textContent = bus.name;
  document.getElementById('sumRoute').textContent = `${state.from} ‚Üí ${state.to}`;
  document.getElementById('sumDate').textContent = state.date ? new Date(state.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'}) : '-';
  document.getElementById('sumDep').textContent = bus.dep;

  const grid = document.getElementById('seatGrid');
  const totalSeats = bus.seats;
  let html = '';
  for (let i = 1; i <= totalSeats; i++) {
    const col = ((i - 1) % 5) + 1;
    let cls = 'available';
    if (bus.booked.includes(i)) cls = 'booked';
    if (col === 3) {
      html += `<div class="seat seat-aisle"></div>`;
    }
    // after aisle col logic: cols 1,2 | gap | 4,5 mapped to 1,2,_,3,4
    const gridCol = col <= 2 ? col : col + 1;
    html += `<div class="seat ${cls}" data-seat="${i}" onclick="toggleSeat(${i})">${i}</div>`;
  }
  grid.innerHTML = '';
  // Rebuild with proper 2+aisle+2 layout
  for (let i = 1; i <= totalSeats; i++) {
    const col = ((i-1) % 4) + 1;
    let cls = bus.booked.includes(i) ? 'booked' : 'available';
    if (col === 3) grid.insertAdjacentHTML('beforeend', `<div class="seat seat-aisle"></div>`);
    grid.insertAdjacentHTML('beforeend', `<div class="seat ${cls}" id="s${i}" onclick="toggleSeat(${i})">${i}</div>`);
  }
}

function toggleSeat(num) {
  const bus = state.selectedBus;
  if (bus.booked.includes(num)) return;
  const idx = state.selectedSeats.indexOf(num);
  if (idx > -1) {
    state.selectedSeats.splice(idx, 1);
    document.getElementById('s'+num).className = 'seat available';
  } else {
    if (state.selectedSeats.length >= 6) { showToast('‚ö†Ô∏è Max 6 seats per booking'); return; }
    state.selectedSeats.push(num);
    document.getElementById('s'+num).className = 'seat selected';
  }
  updateSummary();
}

function updateSummary() {
  const bus = state.selectedBus;
  const cnt = state.selectedSeats.length;
  const chips = document.getElementById('selectedChips');
  chips.innerHTML = cnt ? state.selectedSeats.map(s=>`<div class="seat-chip">S${s}</div>`).join('') : '<span style="color:var(--text3);font-size:0.82rem">No seats selected</span>';
  document.getElementById('sumPrice').textContent = `‚Çπ${bus.price}`;
  document.getElementById('sumSeats').textContent = cnt;
  const subtotal = bus.price * cnt;
  const total = subtotal - state.discount;
  document.getElementById('totalAmt').textContent = `‚Çπ${total}`;
  document.getElementById('proceedBtn').disabled = cnt === 0;
}

function applyCoupon() {
  const code = document.getElementById('couponInput').value.toUpperCase().trim();
  const coupons = { 'SAVE10': 0.1, 'BUSGO20': 0.2, 'TRAVEL50': 50 };
  const bus = state.selectedBus;
  const cnt = state.selectedSeats.length;
  if (!cnt) { showToast('‚ö†Ô∏è Select at least one seat first'); return; }
  if (coupons[code]) {
    const val = coupons[code];
    const subtotal = bus.price * cnt;
    state.discount = val < 1 ? Math.round(subtotal * val) : val;
    document.getElementById('discountAmt').textContent = state.discount;
    document.getElementById('couponSuccess').style.display = 'block';
    document.getElementById('discountDisplay').textContent = '-‚Çπ'+state.discount;
    document.getElementById('discountRow').style.display = 'flex';
    updateSummary();
    showToast('üéâ Coupon applied successfully!');
  } else {
    showToast('‚ùå Invalid coupon code. Try SAVE10');
  }
}

// ===== PASSENGER DETAILS =====
function goDetails() {
  showPage('details-page');
  renderStepBar('stepBar2', 3);
  const total = state.selectedBus.price * state.selectedSeats.length - state.discount;
  document.getElementById('detailTotal').textContent = `‚Çπ${total}`;
}

function selectPay(el, method) {
  document.querySelectorAll('.pay-method').forEach(m => m.classList.remove('active'));
  el.classList.add('active');
  state.payMethod = method;
  document.getElementById('cardFields').style.display = method === 'card' ? 'block' : 'none';
  document.getElementById('upiField').style.display = method === 'upi' ? 'block' : 'none';
}

// Card number formatting
document.addEventListener('input', e => {
  if (e.target.id === 'pCard') {
    let v = e.target.value.replace(/\D/g,'').substring(0,16);
    e.target.value = v.replace(/(\d{4})/g,'$1 ').trim();
  }
  if (e.target.id === 'pExpiry') {
    let v = e.target.value.replace(/\D/g,'').substring(0,4);
    if (v.length > 2) v = v.substring(0,2) + '/' + v.substring(2);
    e.target.value = v;
  }
});

function validateDetails() {
  let ok = true;
  const fields = [
    { id:'ff-name', input: document.getElementById('pName'), check: v => v.trim().length >= 2 },
    { id:'ff-phone', input: document.getElementById('pPhone'), check: v => /^\d{10}$/.test(v.trim()) },
    { id:'ff-email', input: document.getElementById('pEmail'), check: v => /\S+@\S+\.\S+/.test(v.trim()) },
    { id:'ff-age', input: document.getElementById('pAge'), check: v => v >= 5 && v <= 100 },
  ];
  fields.forEach(f => {
    const wrap = document.getElementById(f.id);
    if (f.check(f.input.value)) {
      wrap.classList.remove('error');
    } else {
      wrap.classList.add('error');
      ok = false;
    }
  });
  return ok;
}

function processPayment() {
  if (!validateDetails()) return;
  state.passenger = {
    name: document.getElementById('pName').value,
    phone: document.getElementById('pPhone').value,
    email: document.getElementById('pEmail').value,
    age: document.getElementById('pAge').value,
  };
  const loader = document.getElementById('payLoader');
  loader.classList.add('show');
  setTimeout(() => {
    loader.classList.remove('show');
    showConfirmation();
  }, 2200);
}

// ===== CONFIRMATION =====
function showConfirmation() {
  showPage('confirm-page');
  const bus = state.selectedBus;
  const bookingId = 'BG' + Date.now().toString().slice(-8).toUpperCase();
  const total = bus.price * state.selectedSeats.length - state.discount;
  const dateStr = state.date ? new Date(state.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'}) : '-';

  document.getElementById('ticketId').textContent = bookingId;
  document.getElementById('tcFrom').textContent = state.from;
  document.getElementById('tcDep').textContent = bus.dep;
  document.getElementById('tcTo').textContent = state.to;
  document.getElementById('tcArr').textContent = bus.arr;
  document.getElementById('tcName').textContent = state.passenger.name;
  document.getElementById('tcBus').textContent = bus.name;
  document.getElementById('tcSeats').textContent = state.selectedSeats.map(s=>'S'+s).join(', ');
  document.getElementById('tcDate').textContent = dateStr;
  document.getElementById('tcPhone').textContent = state.passenger.phone;
  document.getElementById('tcAmount').textContent = '‚Çπ' + total;

  // QR
  const qr = document.getElementById('qrCode');
  qr.innerHTML = generateQR(bookingId);

  // Save
  const bookings = JSON.parse(localStorage.getItem('busgo_bookings') || '[]');
  bookings.push({ id: bookingId, from: state.from, to: state.to, date: state.date, bus: bus.name, seats: state.selectedSeats, passenger: state.passenger, amount: total });
  localStorage.setItem('busgo_bookings', JSON.stringify(bookings));

  launchConfetti();
}

function generateQR(text) {
  // Simple visual QR placeholder using CSS grid
  const size = 8;
  let squares = '';
  for (let r = 0; r < size; r++) {
    for (let c = 0; c < size; c++) {
      const on = (r===0||r===size-1||c===0||c===size-1||(r>=1&&r<=3&&c>=1&&c<=3)||(r>=1&&r<=3&&c>=size-4&&c<=size-2)||(r>=size-4&&r<=size-2&&c>=1&&c<=3)||Math.random()>0.55);
      squares += `<div style="width:9px;height:9px;background:${on?'var(--text)':'transparent'}"></div>`;
    }
  }
  return `<div style="display:grid;grid-template-columns:repeat(${size},9px);gap:1px;padding:8px;background:var(--surface2);border-radius:6px">${squares}</div>`;
}

function launchConfetti() {
  const wrap = document.getElementById('confettiWrap');
  wrap.innerHTML = '';
  const colors = ['#e8521a','#f07c4a','#2d9e6b','#f0b429','#4a90e2','#e040fb'];
  for (let i = 0; i < 80; i++) {
    const p = document.createElement('div');
    p.className = 'confetti-piece';
    p.style.cssText = `
      left: ${Math.random()*100}%;
      top: ${-10 - Math.random()*20}px;
      background: ${colors[Math.floor(Math.random()*colors.length)]};
      animation-delay: ${Math.random()*2}s;
      animation-duration: ${2+Math.random()*2}s;
      width: ${6+Math.random()*8}px;
      height: ${6+Math.random()*8}px;
      border-radius: ${Math.random()>0.5?'50%':'2px'};
    `;
    wrap.appendChild(p);
  }
  setTimeout(() => wrap.innerHTML = '', 5000);
}

// ===== STEP BAR =====
function renderStepBar(id, active) {
  const steps = ['Search','Seats','Details','Payment'];
  const el = document.getElementById(id);
  let html = '';
  steps.forEach((s, i) => {
    const n = i + 1;
    const cls = n < active ? 'done' : n === active ? 'active' : '';
    html += `<div class="step ${cls}"><div class="step-num">${n < active ? '‚úì' : n}</div><div class="step-label">${s}</div></div>`;
    if (i < steps.length - 1) html += `<div class="step-line ${n < active ? 'done' : ''}"></div>`;
  });
  el.innerHTML = html;
}

// ===== NAVIGATION =====
function showPage(id) {
  ['home-page','results-page','seat-page','details-page','confirm-page'].forEach(p => {
    document.getElementById(p).style.display = p === id ? 'block' : 'none';
  });
  window.scrollTo(0,0);
}
function goHome() {
  showPage('home-page');
  document.getElementById('mobileMenu').classList.remove('open');
}
function goResults() { showPage('results-page'); }
function goSeat() { showPage('seat-page'); }

// ===== TOAST =====
function showToast(msg) {
  const t = document.getElementById('toast');
  const m = document.getElementById('toastMsg');
  m.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ===== SCROLL REVEAL =====
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) { e.target.style.opacity = '1'; e.target.style.transform = 'translateY(0)'; }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.route-card').forEach(el => {
  el.style.opacity = '0'; el.style.transform = 'translateY(20px)';
  el.style.transition = 'opacity 0.5s, transform 0.5s';
  observer.observe(el);
});
</script>
</body>
</html>